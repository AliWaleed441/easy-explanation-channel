<!DOCTYPE html>
<!--
<html>
  
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4357599305740800"
          crossorigin="anonymous"></script>
  <!--
    If you are serving your web app in a path other than the root, change the
    href value below to reflect the base path you are serving from.

    The path provided below has to start and end with a slash "/" in order for
    it to work correctly.

    For more details:
    * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base

    This is a placeholder for base href that will be replaced by the value of
    the `--base-href` argument provided to `flutter build`.
  -->

  <!-- <base href="/"> -->
<!--
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="A new Flutter project.">
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()">

  <!-- iOS meta tags & icons -->
<!--
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="channelyoutube">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <!-- Favicon -->
<!--
  <link rel="icon" type="image/png" href="logo.png"/>
<!--
  <title>channelyoutube</title>
  <link rel="manifest" href="manifest.json">
<!--
  <script>
    // The value below is injected by flutter build, do not touch.
    var serviceWorkerVersion = '2236103002';
  </script>
  <!-- This script adds the flutter initialization JS code -->
  <!--
  <script src="flutter.js" defer></script>
</head>
<body>
  <script>
    window.addEventListener('load', function(ev) {
      // Download main.dart.js
      _flutter.loader.loadEntrypoint({
        serviceWorker: {
          serviceWorkerVersion: serviceWorkerVersion,
        }
      }).then(function(engineInitializer) {
        return engineInitializer.initializeEngine();
      }).then(function(appRunner) {
        return appRunner.runApp();
      });
    });
  </script>
</body>
</html>

-->



<html lang="ar" dir="rtl">
  <head>
    <title>جارٍ التحميل...</title>
    
    <META Http-Equiv="Cache-Control" Content="no-cache"/>
    <META Http-Equiv="Pragma" Content="no-cache"/>
    <META Http-Equiv="Expires" Content="0"/>
    
    <script type="text/javascript" language="javascript" src="/xmlpserver/xdo/jslib/ajax.js"></script>    
    <script type="text/javascript" language="javascript" src="/xmlpserver/jsconstants.jsp"></script>
    <script type="text/javascript" language="javascript" src="/xmlpserver/jstrans.jsp"></script>
    <script language='JavaScript' type='text/JavaScript'>
    
		var reportGenerated = 'false';
		var explicitCancel = 'false'
		var responseTime = 0;	
		var unLoadFlag = 'false';
		var stageCounter = 1;
		
        function enableApplyRefresh(){
	           
	        var parentDoc = window.parent.document;
	        if (parentDoc)
	        {
		          var applyElem = parentDoc.getElementById('reportViewApply');
	          if (applyElem)
	          {
	            applyElem.disabled = false;
	            applyElem.setAttribute("class","button");
	          }
	          var runRepLink = parentDoc.getElementById('xdo:runReportLink');
	    	  if (runRepLink)
	    	  {
	            runRepLink.disabled = false;
	            runRepLink.setAttribute("onclick", "return run();");
	    	  }
	    	  var refreshIcon = parentDoc.getElementById('refreshViewImg');
	    	  if (refreshIcon)
	    	  {
	    		refreshIcon.setAttribute("src",xdo.constants.IMAGE_BASE_DIR_PATH + "toolbar/refresh_ena.png");
	    		refreshIcon.setAttribute("onmouseout","this.src='" + xdo.constants.IMAGE_BASE_DIR_PATH + "toolbar/refresh_ena.png'");
	    		refreshIcon.setAttribute("onmouseover","this.src='" + xdo.constants.IMAGE_BASE_DIR_PATH + "toolbar/refresh_ovr.png'");
	    		refreshIcon.setAttribute("onmousedown","this.src='" + xdo.constants.IMAGE_BASE_DIR_PATH + "toolbar/refresh_dwn.png'");
	    		refreshIcon.setAttribute("onmouseup","this.src='" + xdo.constants.IMAGE_BASE_DIR_PATH + "toolbar/refresh_ena.png'");
	    	  }
            }
			
		}
                
	    setTimeout(runStatusCheck,1);
	        
		function runStatusCheck() {
		
			var url = "/xmlpserver/servlet/xdo?_xdo=%2Fguest%2FPASSPORT_LAYOUT_G.xdo&fromLoadingPage=true&_id=f0bfc9cb-7a29-4d82-943e-0fd3c45299e2";
			var req = new Ajax();
			if(responseTime == 0)
			{
				document.getElementById('processDiv').style.display = 'none';
				document.getElementById('loadSpan').style.display = '';
			}
			if(responseTime == 5000)
			{
			  document.getElementById('processDiv').style.display = 'block';
			  document.getElementById('loadSpan').style.display = 'none';
			}
			
			/* Remove stage counter	
			document.getElementById('stageCounter').innerHTML = RES_STATUS_STAGE.replace('{0}', stageCounter);	
			stageCounter = stageCounter + 1;
			*/
			
			req.doPost(url, "", function(res){
			
	        	res = res.trim();	        
	        	if (res != "") {
	        		reportGenerated = 'true'; 
	        		document.getElementById('message').innerHTML = res;	        		
			        document.getElementById('finalRequest').value = 'true';    
			        document.forms['fid'].action = url;
                    document.forms['fid'].method='POST';				
			        document.forms['fid'].submit();
                    //Enable Apply button and refresh Icon
                    enableApplyRefresh();		
				} else {		
					
			    	responseTime = responseTime + 1000;
			    	
			    	if (responseTime > 60000) {
			    		setTimeout(runStatusCheck,20000);			    	
			    	} else {
			    		setTimeout(runStatusCheck,1000);			    	
			    	}
			 	}
		  	 return false;		
		   });	
	
	    }
	    
	    function handleBeforeUnload() {
	      if (explicitCancel == 'false') {
    		return 'التقرير قيد التشغيل، انقر للبقاء في الصفحة أو عليك مغادرتها';
    	  } 
	    }
	    
	    function handleUnload() {	
	        if (reportGenerated == 'false' && explicitCancel == 'false')  {        
	    		var url = '/xmlpserver/servlet/xdo?_xdo=%2Fguest%2FPASSPORT_LAYOUT_G.xdo&fromLoadingPage=true&_id=f0bfc9cb-7a29-4d82-943e-0fd3c45299e2&_cancel=true';
	    		var req = new Ajax({async:false});
	    	    req.doPost(url, "", "");	    		
	    	} 
	    }
	</script>
  </head>

  <body onbeforeunload="if (reportGenerated == 'false') {return handleBeforeUnload();}" onUnload="return handleUnload();">
  
    <form id="fid">
  
	<div style='display:block;position:absolute;width: 80%' id='xdoLoading'>
	  
    <table width='100%' cellPadding='100' cellSpacing='0' border='0' id='loadingTable' summary='جارٍ التحميل...'>
	    <tr valign='middle' align='center'><td align='center'>
			<span id='message'>
				<div>
				    <span id="loadSpan" style="display:none" class="fieldText">تحميل</span>
				    </br>
			    	<img alt='جارٍ التحميل...' border='0' src="/xmlpserver/theme/alta/images/clock_positive.gif" >
			    	<div id="processDiv" style="display:none">			
				    <span class='prompt'>جارٍ المعالجة...... للإلغاء، انقر</span>
				    <a href='/xmlpserver/servlet/xdo?_xdo=%2Fguest%2FPASSPORT_LAYOUT_G.xdo&fromLoadingPage=true&_id=f0bfc9cb-7a29-4d82-943e-0fd3c45299e2&_cancel=true' onclick="explicitCancel='true'; enableApplyRefresh();" class='datalink'>
				    	هنا
				    </a>
				    <!-- div class='prompt' id="stageCounter"-->										
				    </div>
				    </div>
				</div>
				
			</span>
	    </td></tr>
    </table>
           
	</div>
	
	<input type="hidden" id="fromLoadingPage" name="fromLoadingPage" value="true"/>
    <input type="hidden" id="finalRequest" name="finalRequest" value=""/> 
  
  </form>  
		
  </body>
</html>

